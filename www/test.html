<html>
<head>
  <script>



  </script>
</head>
<body>
  
  <h1 id="clock">0</h1>
  <button id="start">Start</button>
  <button id="stop">Stop</button>
  <br>
  <button id="period">+Period</button>
  <button id="noperiod">-Period</button>
  <button id="possession_home">Home</button>
  <button id="possession_away">Away</button>
  <br>
  <h2>Home</h2>
  <button id="home1pt">1 PT</button>
  <button id="home2pt">2 PT</button>
  <button id="home3pt">3 PT</button>
  <button id="homeno1pt">-1 PT</button>
  <button id="homeno2pt">-2 PT</button>
  <button id="homeno3pt">-3 PT</button>
  <br>
  <button id="homefoul">+Foul</button>
  <button id="hometimeout">+Timeout</button>
  <button id="homenofoul">-Foul</button>
  <button id="homenotimeout">-Timeout</button>
  <br>
  <h2>Away</h2>
  <button id="away1pt">1 PT</button>
  <button id="away2pt">2 PT</button>
  <button id="away3pt">3 PT</button>
  <button id="awayno1pt">-1 PT</button>
  <button id="awayno2pt">-2 PT</button>
  <button id="awayno3pt">-3 PT</button>
  <br>
  <button id="awayfoul">+Foul</button>
  <button id="awaytimeout">+Timeout</button>
  <button id="awaynofoul">-Foul</button>
  <button id="awaynotimeout">-Timeout</button>
  <input type="hidden" value="">
  <script>
  
    var ajax = new XMLHttpRequest();

    ajax.onreadystatechange = function(e) {

      var xhr = e.target;

      if(xhr.readyState == 4 && xhr.status == 200) {
        
        var j = JSON.parse(ajax.responseText);

        var ws = new WebSocket("ws://127.0.0.1:8000/ws/games/" + j["gameId"]);

        ws.onmessage = function(e) {

        }

        ws.onclose = function(e) {

        }

        document.getElementById("start").onclick = function(e) {
          ws.send(JSON.stringify({"cmd": "CLOCK_START"}));
          return false;
        }

        document.getElementById("stop").onclick = function(e) {
          ws.send(JSON.stringify({cmd: "CLOCK_STOP"}));
          return false;
        }
        
                document.getElementById("period").onclick = function(e) {
          ws.send(JSON.stringify({cmd: "PERIOD_UP"}));
          return false;
        }

        document.getElementById("noperiod").onclick = function(e) {
          ws.send(JSON.stringify({cmd: "PERIOD_DOWN"}));
          return false;
        }

        document.getElementById("possession_home").onclick = function(e) {
          ws.send(JSON.stringify({cmd: "POSSESSION_HOME"}));
          return false;
        }

        document.getElementById("possession_away").onclick = function(e) {
          ws.send(JSON.stringify({cmd: "POSSESSION_AWAY"}));
          return false;
        }

        document.getElementById("homefoul").onclick = function(e) {
          ws.send(JSON.stringify({cmd: "FOUL_HOME_UP"}));
          return false;
        }

        document.getElementById("homenofoul").onclick = function(e) {
          ws.send(JSON.stringify({cmd: "FOUL_HOME_DOWN"}));
          return false;
        }

        document.getElementById("awayfoul").onclick = function(e) {
          ws.send(JSON.stringify({cmd: "FOUL_AWAY_UP"}));
          return false;
        }

        document.getElementById("awaynofoul").onclick = function(e) {
          ws.send(JSON.stringify({cmd: "FOUL_AWAY_DOWN"}));
          return false;
        }

        document.getElementById("hometimeout").onclick = function(e) {
          ws.send(JSON.stringify({cmd: "TIMEOUT_HOME_UP"}));
          return false;
        }

        document.getElementById("homenotimeout").onclick = function(e) {
          ws.send(JSON.stringify({cmd: "TIMEOUT_HOME_DOWN"}));
          return false;
        }

        document.getElementById("awaytimeout").onclick = function(e) {
          ws.send(JSON.stringify({cmd: "TIMEOUT_AWAY_UP"}));
          return false;
        }

        document.getElementById("awaynotimeout").onclick = function(e) {
          ws.send(JSON.stringify({cmd: "TIMEOUT_AWAY_DOWN"}));
          return false;
        }

        document.getElementById("home1pt").onclick = function(e) {
          ws.send(JSON.stringify({cmd: "SCORE_HOME", step: 1}));
          return false;
        }

        document.getElementById("home2pt").onclick = function(e) {
          ws.send(JSON.stringify({cmd: "SCORE_HOME", step: 2}));
          return false;
        }

        document.getElementById("home3pt").onclick = function(e) {
          ws.send(JSON.stringify({cmd: "SCORE_HOME", step: 3}));
          return false;
        }

        document.getElementById("homeno1pt").onclick = function(e) {
          ws.send(JSON.stringify({cmd: "SCORE_HOME", step: -1}));
          return false;
        }

        document.getElementById("homeno2pt").onclick = function(e) {
          ws.send(JSON.stringify({cmd: "SCORE_HOME", step: -2}));
          return false;
        }

        document.getElementById("homeno3pt").onclick = function(e) {
          ws.send(JSON.stringify({cmd: "SCORE_HOME", step: -3}));
          return false;
        }
        
        document.getElementById("away1pt").onclick = function(e) {
          ws.send(JSON.stringify({cmd: "SCORE_AWAY", step: 1}));
          return false;
        }

        document.getElementById("away2pt").onclick = function(e) {
          ws.send(JSON.stringify({cmd: "SCORE_AWAY", step: 2}));
          return false;
        }

        document.getElementById("away3pt").onclick = function(e) {
          ws.send(JSON.stringify({cmd: "SCORE_AWAY", step: 3}));
          return false;
        }

        document.getElementById("awayno1pt").onclick = function(e) {
          ws.send(JSON.stringify({cmd: "SCORE_AWAY", step: -1}));
          return false;
        }

        document.getElementById("awayno2pt").onclick = function(e) {
          ws.send(JSON.stringify({cmd: "SCORE_AWAY", step: -2}));
          return false;
        }

        document.getElementById("awayno3pt").onclick = function(e) {
          ws.send(JSON.stringify({cmd: "SCORE_AWAY", step: -3}));
          return false;
        }

      }

    }

    ajax.open("POST", "http://127.0.0.1:8000/api/games", true)
    ajax.send();

  </script>

</body>
</html>
